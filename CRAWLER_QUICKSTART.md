# ì˜¬ë¦¬ë¸Œì˜ í¬ë¡¤ëŸ¬ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ ğŸš€

ì˜¬ë¦¬ë¸Œì˜ ë§¤ì¥ì˜ ìƒí’ˆ ì •ë³´ë¥¼ í¬ë¡¤ë§í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ“‹ ì¤€ë¹„ì‚¬í•­

- Python 3.8 ì´ìƒ
- ì¸í„°ë„· ì—°ê²°

## ğŸ”§ ì„¤ì¹˜ (5ë¶„)

### 1ë‹¨ê³„: ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# requirements.txtì˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# ë˜ëŠ” uvë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
uv sync
```

### 2ë‹¨ê³„: Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜

```bash
# Chromium ë¸Œë¼ìš°ì € ì„¤ì¹˜ (ì•½ 100MB)
playwright install chromium
```

ì„¤ì¹˜ ì™„ë£Œ! ì´ì œ í¬ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. âœ…

## ğŸ¯ ë¹ ë¥¸ ì‚¬ìš©ë²•

### ë°©ë²• 1: ëª…ë ¹ì¤„ì—ì„œ ì‹¤í–‰

ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì…ë‹ˆë‹¤:

```bash
# ëª…ë™ íƒ€ìš´ ë§¤ì¥ í¬ë¡¤ë§ (ë¸Œë¼ìš°ì € í‘œì‹œ)
python crawl.py --store "ëª…ë™ íƒ€ìš´"

# ë¸Œë¼ìš°ì € ìˆ¨ê¹€ ëª¨ë“œë¡œ ì‹¤í–‰
python crawl.py --store "ëª…ë™ íƒ€ìš´" --headless

# íŠ¹ì • ì¹´í…Œê³ ë¦¬ë§Œ í¬ë¡¤ë§
python crawl.py --store "ëª…ë™ íƒ€ìš´" --categories "ìŠ¤í‚¨ì¼€ì–´,ë©”ì´í¬ì—…,ë§ˆìŠ¤í¬/íŒ©"

# ì—¬ëŸ¬ ë§¤ì¥ í•œë²ˆì— í¬ë¡¤ë§
python crawl.py --stores "ëª…ë™ íƒ€ìš´,ê°•ë‚¨ì—­ì ,í™ëŒ€ì…êµ¬ì "
```

### ë°©ë²• 2: Python ì½”ë“œì—ì„œ ì‚¬ìš©

```python
import asyncio
from src.oliveyoung_crawler import OliveYoungCrawler

async def main():
    # í¬ë¡¤ëŸ¬ ìƒì„±
    crawler = OliveYoungCrawler()
    
    # ë¸Œë¼ìš°ì € ì‹œì‘
    await crawler.init_browser(headless=False)
    
    try:
        # ëª…ë™ íƒ€ìš´ ë§¤ì¥ í¬ë¡¤ë§
        products = await crawler.get_store_products(
            store_name="ëª…ë™ íƒ€ìš´",
            categories=['ìŠ¤í‚¨ì¼€ì–´', 'ë©”ì´í¬ì—…']
        )
        
        print(f"âœ… ìˆ˜ì§‘ ì™„ë£Œ: {len(products['categories'])}ê°œ ì¹´í…Œê³ ë¦¬")
        
    finally:
        await crawler.close_browser()

# ì‹¤í–‰
asyncio.run(main())
```

## ğŸ“ ê²°ê³¼ í™•ì¸

í¬ë¡¤ë§ëœ ë°ì´í„°ëŠ” `data/` í´ë”ì— JSON íŒŒì¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤:

```bash
# ìµœì‹  í¬ë¡¤ë§ ê²°ê³¼ í™•ì¸
ls -lt data/products_*.json | head -1

# JSON íŒŒì¼ ë‚´ìš© ë³´ê¸°
cat data/products_ëª…ë™_íƒ€ìš´_20251110.json | python -m json.tool | head -50
```

### JSON ë°ì´í„° êµ¬ì¡° ì˜ˆì‹œ

```json
{
  "store_name": "ëª…ë™ íƒ€ìš´",
  "crawled_at": "2025-11-10T14:30:00",
  "categories": {
    "ìŠ¤í‚¨ì¼€ì–´": [
      {
        "product_id": "A000123456",
        "name": "í† ë¦¬ë“  ë‹¤ì´ë¸Œì¸ ì €ë¶„ì íˆì•Œë£¨ë¡ ì‚° ì„¸ëŸ¼",
        "brand": "í† ë¦¬ë“ ",
        "price": 25000,
        "image_url": "https://image.oliveyoung.co.kr/...",
        "stock_status": "ì¬ê³ ìˆìŒ"
      }
    ]
  }
}
```

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: ë§¤ì¥ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”

**í•´ê²° ë°©ë²•**: ì˜¬ë¦¬ë¸Œì˜ ì›¹ì‚¬ì´íŠ¸ì˜ ì •í™•í•œ ë§¤ì¥ëª…ì„ ì‚¬ìš©í•˜ì„¸ìš”.

```bash
# ë””ë²„ê¹… ë„êµ¬ë¡œ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° í™•ì¸
python debug_crawler.py
```

ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´:
1. F12ë¥¼ ëˆŒëŸ¬ ê°œë°œì ë„êµ¬ ì—´ê¸°
2. ë§¤ì¥ ê²€ìƒ‰í•´ë³´ê¸°
3. ì •í™•í•œ ë§¤ì¥ëª… í™•ì¸

### ë¬¸ì œ 2: Playwright ì„¤ì¹˜ ì˜¤ë¥˜

```bash
# ì‹œìŠ¤í…œ ì˜ì¡´ì„±ì´ ë¶€ì¡±í•œ ê²½ìš° (Linux)
playwright install-deps chromium
playwright install chromium

# macOSì˜ ê²½ìš° (ë³´í†µ ë¬¸ì œ ì—†ìŒ)
playwright install chromium
```

### ë¬¸ì œ 3: ìƒí’ˆ ì •ë³´ê°€ ìˆ˜ì§‘ë˜ì§€ ì•Šì•„ìš”

ì˜¬ë¦¬ë¸Œì˜ ì›¹ì‚¬ì´íŠ¸ì˜ HTML êµ¬ì¡°ê°€ ë³€ê²½ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:

1. ë””ë²„ê¹… ë„êµ¬ ì‹¤í–‰:
```bash
python debug_crawler.py
```

2. ìƒì„±ëœ íŒŒì¼ í™•ì¸:
   - `debug_store_page.html`: ë§¤ì¥ í˜ì´ì§€ HTML
   - `debug_search_result.png`: ê²€ìƒ‰ ê²°ê³¼ ìŠ¤í¬ë¦°ìƒ·
   - `debug_products.png`: ìƒí’ˆ ëª©ë¡ ìŠ¤í¬ë¦°ìƒ·

3. ì ì ˆí•œ CSS ì…€ë ‰í„° ì°¾ê¸°:
   - ë¸Œë¼ìš°ì €ì—ì„œ F12 â†’ Elements íƒ­
   - ì›í•˜ëŠ” ìš”ì†Œ ìš°í´ë¦­ â†’ Copy â†’ Copy selector
   - `src/oliveyoung_crawler.py`ì˜ ì…€ë ‰í„° ìˆ˜ì •

### ë¬¸ì œ 4: ë¡œê·¸ì¸ì´ í•„ìš”í•˜ë‹¤ê³  ë‚˜ì™€ìš”

ì¼ë¶€ ì •ë³´ëŠ” ë¡œê·¸ì¸ í›„ì—ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ì„ì‹œ í•´ê²° ë°©ë²•**:
1. `headless=False`ë¡œ ì‹¤í–‰
2. ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë¡œê·¸ì¸
3. ë¡œê·¸ì¸ ìƒíƒœì—ì„œ í¬ë¡¤ë§ ì§„í–‰

**ì˜êµ¬ í•´ê²° ë°©ë²•**:
í¬ë¡¤ëŸ¬ì— ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤ (ë³„ë„ êµ¬í˜„ í•„ìš”).

## ğŸ’¡ ìœ ìš©í•œ íŒ

### íŒ 1: í¬ë¡¤ë§ ì†ë„ ì¡°ì ˆ

ì›¹ì‚¬ì´íŠ¸ì— ë¶€ë‹´ì„ ì£¼ì§€ ì•Šë„ë¡ ìš”ì²­ ì‚¬ì´ì— ì¶©ë¶„í•œ ì§€ì—°ì„ ë‘ì„¸ìš”:

```bash
# ìš”ì²­ ì‚¬ì´ì— 5ì´ˆ ëŒ€ê¸°
python crawl.py --store "ëª…ë™ íƒ€ìš´" --delay 5.0
```

### íŒ 2: ë°ì´í„° ìë™ ì—…ë°ì´íŠ¸

ë§¤ì¼ ìë™ìœ¼ë¡œ í¬ë¡¤ë§í•˜ë ¤ë©´ cron (Linux/macOS) ë˜ëŠ” ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ (Windows)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:

```bash
# crontab ì˜ˆì‹œ (ë§¤ì¼ ì˜¤ì „ 3ì‹œ ì‹¤í–‰)
0 3 * * * cd /Users/uijungchung/pipecat && python crawl.py --store "ëª…ë™ íƒ€ìš´" --headless
```

### íŒ 3: í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ ì±—ë´‡ì— ì—°ë™

```python
import json
from src.store_service import StoreService

# í¬ë¡¤ë§ëœ ìƒí’ˆ ë°ì´í„° ë¡œë“œ
with open('data/products_ëª…ë™_íƒ€ìš´_20251110.json', 'r', encoding='utf-8') as f:
    products_data = json.load(f)

# ë§¤ì¥ ì„œë¹„ìŠ¤ì™€ ì—°ë™
store_service = StoreService()

# ìƒí’ˆ ì •ë³´ë¥¼ ì±—ë´‡ì—ì„œ ì‚¬ìš©
for category, products in products_data['categories'].items():
    print(f"\n{category} ì¹´í…Œê³ ë¦¬:")
    for product in products[:3]:  # ìƒìœ„ 3ê°œë§Œ
        print(f"  - {product['name']}: {product['price']:,}ì›")
```

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### ë²•ì  ê³ ì§€

- **ì´ìš©ì•½ê´€ ì¤€ìˆ˜**: ì˜¬ë¦¬ë¸Œì˜ ì›¹ì‚¬ì´íŠ¸ì˜ ì´ìš©ì•½ê´€ì„ í™•ì¸í•˜ê³  ì¤€ìˆ˜í•˜ì„¸ìš”
- **robots.txt í™•ì¸**: https://www.oliveyoung.co.kr/robots.txt í™•ì¸
- **ìƒì—…ì  ì´ìš©**: ìƒì—…ì  ëª©ì ìœ¼ë¡œ ì‚¬ìš© ì‹œ ì˜¬ë¦¬ë¸Œì˜ì˜ ê³µì‹ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤
- **ê°œì¸ì •ë³´**: ê°œì¸ì •ë³´ëŠ” ìˆ˜ì§‘í•˜ì§€ ë§ˆì„¸ìš”
- **ì ì ˆí•œ ì‚¬ìš©**: ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì›¹ì‚¬ì´íŠ¸ì— ë¶€ë‹´ì„ ì£¼ì§€ ë§ˆì„¸ìš”

### ìœ¤ë¦¬ì  í¬ë¡¤ë§

âœ… **ì¢‹ì€ ìŠµê´€**:
- ìš”ì²­ ì‚¬ì´ì— ì¶©ë¶„í•œ ì§€ì—° ì‹œê°„ ë‘ê¸° (ìµœì†Œ 1-2ì´ˆ)
- í•„ìš”í•œ ë°ì´í„°ë§Œ ìˆ˜ì§‘í•˜ê¸°
- í¬ë¡¤ë§ ì‹œê°„ëŒ€ ê³ ë ¤í•˜ê¸° (ìƒˆë²½ ì‹œê°„ ê¶Œì¥)
- User-Agent í—¤ë” í¬í•¨í•˜ê¸°

âŒ **ë‚˜ìœ ìŠµê´€**:
- ì§§ì€ ì‹œê°„ì— ëŒ€ëŸ‰ ìš”ì²­
- í•„ìš” ì—†ëŠ” í˜ì´ì§€ê¹Œì§€ í¬ë¡¤ë§
- í¬ë¡¤ë§ ê²°ê³¼ë¥¼ ë¬´ë‹¨ìœ¼ë¡œ ì¬ë°°í¬

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **í¬ë¡¤ë§ ë°ì´í„° ì •ì œ**: ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì •ì œí•˜ê³  êµ¬ì¡°í™”
2. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**: SQLite, PostgreSQL ë“±ì— ì €ì¥
3. **ì±—ë´‡ ì—°ë™**: AI ì‡¼í•‘ ì–´ì‹œìŠ¤í„´íŠ¸ì— ìƒí’ˆ ì •ë³´ ì œê³µ
4. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ì •ê¸°ì ìœ¼ë¡œ í¬ë¡¤ë§í•˜ì—¬ ìµœì‹  ì •ë³´ ìœ ì§€

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- [ìƒì„¸ ê°€ì´ë“œ](CRAWLER_GUIDE.md): ê³ ê¸‰ ì‚¬ìš©ë²•ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- [ì•„í‚¤í…ì²˜ ë¬¸ì„œ](ARCHITECTURE.md): í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡°
- [ë¹ ë¥¸ ì‹œì‘](QUICK_START.md): AI ì±—ë´‡ ë¹ ë¥¸ ì‹œì‘

## â“ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?

ë¬¸ì œê°€ ê³„ì†ë˜ë©´:
1. `debug_crawler.py`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° í™•ì¸
2. ìƒì„±ëœ HTML íŒŒì¼ê³¼ ìŠ¤í¬ë¦°ìƒ· í™•ì¸
3. CSS ì…€ë ‰í„°ë¥¼ ì§ì ‘ ìˆ˜ì •í•´ë³´ê¸°

---

**Happy Crawling! ğŸ‰**

> ì°¸ê³ : ì˜¬ë¦¬ë¸Œì˜ ì›¹ì‚¬ì´íŠ¸ì˜ êµ¬ì¡°ëŠ” ì–¸ì œë“ ì§€ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
> í¬ë¡¤ëŸ¬ê°€ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ `debug_crawler.py`ë¡œ êµ¬ì¡°ë¥¼ ë‹¤ì‹œ ë¶„ì„í•˜ê³  
> `src/oliveyoung_crawler.py`ì˜ CSS ì…€ë ‰í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.

